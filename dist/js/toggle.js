(function(e){"use strict";const D={class:"flex items-center gap-2"},S={key:0,class:"help-text text-xs italic"},L=e.defineComponent({__name:"DetailToggle",props:{index:{},field:{},resource:{},resourceName:{},resourceId:{}},setup(t){const l=t,o=e.ref(l.field.value??!1),i=e.ref(!1);let a=null;const f=e.computed(()=>({color:o.value?i.value?l.field.onLabelColorDark:l.field.onLabelColor:i.value?l.field.offLabelColorDark:l.field.offLabelColor,fontSize:"6px",padding:"0 6px"})),u=e.computed(()=>{const d=i.value?l.field.onBulletColorDark:l.field.onBulletColor,y=i.value?l.field.offBulletColorDark:l.field.offBulletColor;return{backgroundColor:o.value?d:y,transform:o.value?"translateX(1.25rem)":"translateX(0)"}}),c=e.computed(()=>{const d=i.value?l.field.onColorDark:l.field.onColor,y=i.value?l.field.offColorDark:l.field.offColor;return{backgroundColor:o.value?d:y}}),b=d=>{i.value=d.matches};return e.onMounted(()=>{a=window.matchMedia("(prefers-color-scheme: dark)"),i.value=a.matches,a.addEventListener("change",b)}),e.onBeforeUnmount(()=>{a==null||a.removeEventListener("change",b)}),(d,y)=>{const x=e.resolveComponent("PanelItem");return e.openBlock(),e.createBlock(x,{index:t.index,field:t.field},{value:e.withCtx(()=>[e.createElementVNode("div",D,[e.createElementVNode("label",{class:"group pointer-events-none relative inline-flex h-5 w-10 shrink-0 items-center overflow-hidden rounded-full opacity-50 inset-ring inset-ring-gray-900/5 outline-offset-2 outline-indigo-600 transition-colors duration-200 ease-in-out",style:e.normalizeStyle([{padding:"2.25px"},c.value])},[t.field.onLabel||t.field.offLabel?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["pointer-events-none absolute inset-0 flex items-center font-medium tracking-wide uppercase",o.value?"justify-start":"justify-end"]),style:e.normalizeStyle(f.value)},e.toDisplayString(o.value?t.field.onLabel:t.field.offLabel),7)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:"inline-block h-4 w-4 rounded-full shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",style:e.normalizeStyle(u.value)},null,4)],4),t.field.helpOnDetail&&!t.field.hidden?(e.openBlock(),e.createElementBlock("p",S,e.toDisplayString(t.field.helpOnDetail),1)):e.createCommentVNode("",!0)])]),_:1},8,["index","field"])}}});function E(){const t=e.getCurrentInstance(),l=t==null?void 0:t.props,o=e.ref(null),i=e.computed(()=>l.field),a=e.computed(()=>{var r;return((r=l.field)==null?void 0:r.attribute)||""}),f=e.computed(()=>{var r;return((r=l.field)==null?void 0:r.visible)!==!1}),u=e.computed(()=>{var r;return((r=l.field)==null?void 0:r.readonly)||!1}),c=()=>{var r;o.value=((r=l.field)==null?void 0:r.value)??!1},b=()=>!1,d=(r,g,h)=>{r.append(g,h)},y=(r,g,h)=>{f.value&&d(r,g,h)},x=r=>{const g=a.value;g&&y(r,g,o.value?1:0)},v=(r,g)=>{var h;(h=window.Nova)==null||h.$emit(`${r}-value`,g)};return e.onMounted(()=>{l.field&&(l.field.fill=x)}),{value:o,currentField:i,fieldAttribute:a,isVisible:f,currentlyIsReadonly:u,setInitialValue:c,fieldDefaultValue:b,fillInto:d,fillIfVisible:y,fill:x,emitFieldValueChange:v,loading:e.ref(!1)}}const N={class:"mt-1 flex items-center gap-2"},V={key:0,class:"help-text text-xs italic"},z=e.defineComponent({__name:"FormToggle",props:{resourceName:{},resourceId:{},field:{},errors:{},showHelpText:{type:Boolean},fullWidthContent:{type:Boolean}},setup(t){const{currentField:l,value:o,loading:i,currentlyIsReadonly:a,setInitialValue:f}=E(),u=e.ref(!1);let c=null;const b=()=>{a.value||(o.value=!o.value)},d=e.computed(()=>!!o.value),y=e.computed(()=>{var n;return[i.value||(n=l.value)!=null&&n.readonly?"pointer-events-none cursor-default opacity-50":"cursor-pointer opacity-100"]}),x=e.computed(()=>{var n;return[i.value||(n=l.value)!=null&&n.readonly?"pointer-events-none":"cursor-pointer"]}),v=e.computed(()=>{var n,s,C,m;return{color:o.value?u.value?(n=l.value)==null?void 0:n.onLabelColorDark:(s=l.value)==null?void 0:s.onLabelColor:u.value?(C=l.value)==null?void 0:C.offLabelColorDark:(m=l.value)==null?void 0:m.offLabelColor}}),r=e.computed(()=>{var C,m,p,k;const n=u.value?(C=l.value)==null?void 0:C.onBulletColorDark:(m=l.value)==null?void 0:m.onBulletColor,s=u.value?(p=l.value)==null?void 0:p.offBulletColorDark:(k=l.value)==null?void 0:k.offBulletColor;return{backgroundColor:d.value?n:s,transform:d.value?"translateX(1.25rem)":"translateX(0)"}}),g=e.computed(()=>{var C,m,p,k;const n=u.value?(C=l.value)==null?void 0:C.onColorDark:(m=l.value)==null?void 0:m.onColor,s=u.value?(p=l.value)==null?void 0:p.offColorDark:(k=l.value)==null?void 0:k.offColor;return{backgroundColor:d.value?n:s}}),h=n=>{u.value=n.matches};return e.onMounted(()=>{f(),c=window.matchMedia("(prefers-color-scheme: dark)"),u.value=c.matches,c.addEventListener("change",h)}),e.onBeforeUnmount(()=>{c==null||c.removeEventListener("change",h)}),(n,s)=>{const C=e.resolveComponent("DefaultField");return e.openBlock(),e.createBlock(C,{field:e.unref(l),errors:t.errors,"full-width-content":t.fullWidthContent},{field:e.withCtx(()=>{var m,p,k,w,B;return[e.createElementVNode("div",N,[e.createElementVNode("label",{class:e.normalizeClass(["group relative inline-flex h-5 w-10 shrink-0 items-center overflow-hidden rounded-full inset-ring inset-ring-gray-900/5 outline-offset-2 outline-indigo-600 transition-colors duration-200 ease-in-out has-focus-visible:outline-2",y.value]),style:e.normalizeStyle([{padding:"2.01px"},g.value]),onClick:b},[(m=e.unref(l))!=null&&m.onLabel||(p=e.unref(l))!=null&&p.offLabel?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["pointer-events-none absolute inset-0 flex items-center px-1.5 font-medium tracking-wide uppercase",d.value?"justify-start":"justify-end"]),style:e.normalizeStyle({...v.value,fontSize:"6px"})},e.toDisplayString(d.value?(k=e.unref(l))==null?void 0:k.onLabel:(w=e.unref(l))==null?void 0:w.offLabel),7)):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass(["inline-block h-4 w-4 rounded-full shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",x.value]),style:e.normalizeStyle(r.value)},null,6)],6),(B=e.unref(l))!=null&&B.helpOnForm?(e.openBlock(),e.createElementBlock("p",V,e.toDisplayString(e.unref(l).helpOnForm),1)):e.createCommentVNode("",!0)])]}),_:1},8,["field","errors","full-width-content"])}}}),I={key:0,class:"h-5 w-10"},$=["aria-label","name","checked","disabled"],M={key:0,class:"help-text text-xs italic"},T=e.defineComponent({__name:"IndexToggle",props:{field:{},resourceName:{},resourceId:{},resource:{}},setup(t){var g,h;const l=e.computed(()=>i.value||o.field.readonly?"cursor-default":"cursor-pointer"),o=t,i=e.ref(!1),a=e.ref(o.field.value??!1),f=e.ref(!1),u=o.resourceId??((h=(g=o.resource)==null?void 0:g.id)==null?void 0:h.value);let c=null;const b=e.computed(()=>[i.value||o.field.readonly?"pointer-events-none cursor-default opacity-50":"cursor-pointer opacity-100"]),d=e.computed(()=>({color:a.value?f.value?o.field.onLabelColorDark:o.field.onLabelColor:f.value?o.field.offLabelColorDark:o.field.offLabelColor,fontSize:"6px",padding:"0 6px"})),y=e.computed(()=>{const n=f.value?o.field.onBulletColorDark:o.field.onBulletColor,s=f.value?o.field.offBulletColorDark:o.field.offBulletColor;return{backgroundColor:a.value?n:s,transform:a.value?"translateX(1.25rem)":"translateX(0)"}}),x=e.computed(()=>{const n=f.value?o.field.onColorDark:o.field.onColor,s=f.value?o.field.offColorDark:o.field.offColor;return{backgroundColor:a.value?n:s}}),v=async()=>{var s,C,m;if(o.field.readonly||i.value)return;const n=a.value;a.value=!n,i.value=!0;try{const p=await Nova.request().post(`/nova-vendor/nova-toggle/toggle/${o.resourceName}/${u}`,{attribute:o.field.attribute});if((s=p.data)!=null&&s.success){a.value=!!p.data.value;const k=()=>{const w=a.value?"activated":"deactivated";return`"${p.data.label||o.field.name}" ${w}!`};o.field.reloadPage?(sessionStorage.setItem("nova-toggle-message",k()),setTimeout(()=>window.location.reload(),100)):(C=Nova.$toasted)==null||C.show(k(),{type:"success"})}}catch(p){console.error(p),a.value=n,(m=Nova.$toasted)==null||m.show("Error occurred.",{type:"error"})}finally{i.value=!1}},r=n=>{f.value=n.matches};return e.onMounted(()=>{var s;const n=sessionStorage.getItem("nova-toggle-message");n&&(sessionStorage.removeItem("nova-toggle-message"),(s=Nova.$toasted)==null||s.show(n,{type:"success",duration:3e3})),c=window.matchMedia("(prefers-color-scheme: dark)"),f.value=c.matches,c.addEventListener("change",r)}),e.onBeforeUnmount(()=>{c==null||c.removeEventListener("change",r)}),(n,s)=>(e.openBlock(),e.createElementBlock("div",{class:"flex items-center gap-2",onClick:s[2]||(s[2]=e.withModifiers(()=>{},["stop"]))},[t.field.hidden?(e.openBlock(),e.createElementBlock("div",I)):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["flex items-center gap-2",i.value||t.field.readonly?"cursor-default":"cursor-pointer"])},[e.createElementVNode("label",{class:e.normalizeClass(["group disabled:pointer-events-non relative inline-flex h-5 w-10 shrink-0 items-center overflow-hidden rounded-full inset-ring inset-ring-gray-900/5 outline-offset-2 outline-indigo-600 transition-colors duration-200 ease-in-out disabled:opacity-50 has-focus-visible:outline-2",b.value]),style:e.normalizeStyle([{padding:"2.01px"},x.value]),onClick:s[1]||(s[1]=e.withModifiers(()=>{},["stop"]))},[t.field.onLabel||t.field.offLabel?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass(["pointer-events-none absolute inset-0 flex items-center font-medium tracking-wide uppercase",a.value?"justify-start":"justify-end"]),style:e.normalizeStyle(d.value)},e.toDisplayString(a.value?t.field.onLabel:t.field.offLabel),7)):e.createCommentVNode("",!0),e.createElementVNode("input",{type:"checkbox",class:e.normalizeClass([l.value,"absolute inset-0 appearance-none opacity-0 focus:outline-hidden disabled:pointer-events-none"]),"aria-label":`Toggle ${t.field.attribute}`,name:t.field.attribute,checked:a.value,disabled:i.value||t.field.readonly,onChange:v,onClick:s[0]||(s[0]=e.withModifiers(()=>{},["stop"]))},null,42,$),e.createElementVNode("span",{class:"inline-block h-4 w-4 rounded-full shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out",style:e.normalizeStyle(y.value)},null,4)],6),t.field.helpOnIndex&&!t.field.hidden?(e.openBlock(),e.createElementBlock("p",M,e.toDisplayString(t.field.helpOnIndex),1)):e.createCommentVNode("",!0)],2))]))}});Nova.booting(t=>{t.component("index-nova-toggle",T),t.component("detail-nova-toggle",L),t.component("form-nova-toggle",z)})})(Vue);
